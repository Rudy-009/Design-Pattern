# Flyweight
> 각 객체에 모든 데이터를 유지하는 대신 여러 객체들 간에 상태의 공통 부분들을 공유하여 사용할 수 있는 RAM에 더 많은 객체들을 포함할 수 있도록 하는 디자인 패턴

- 메모리 관련 문제가 있을 때 사용하는 패턴, 사용 빈도가 높지 않다.

## 문제 배경

고유한 상태 (intrinsic state) : 객체의 상수 데이터, 변경 불가능
공유된 상태 (extrinsic state) : 다른 객체들에 의해 '외부에서' 변경되는 객체의 나머지 상태를 공유한 상태

해결 : 고유한 상태는 객체 내부에 유지시키고, 공유된 상태의 저장을 중단하고 공유된 상태에 의존하는 특정 메서드들에 전달.

## 구성 요소

- Flyweight
    - repeatingState : 고유한 상태
    - operation(uniqueState) : 공유된 상태
- Context
    - 공유한 상태를 포함하며, 이 상태는 모든 원본 객체들에서 고유하다.
    - 콘텍스트가 플라이웨이트 객체 중 하나와 쌍을 이루면 원래 객체의 전체 상태를 나타낸다.
- FlyweightFactory
    - Flyweight Pool을 관리
    - 클라이언트에서 주문한 Flyweight Pool에서 Flyweight객체를 찾아서 반환하거나 새로 생성해서 반환한다. 
        - 기준과 일치하는 기존 플라이웨이트를 반환한다.
        - 기준에 맞는 플라이웨이트가 발견되지 않으면 새로 생성한다.

![](Flyweight.png)